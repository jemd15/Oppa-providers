<ion-header>
  <ion-toolbar color="secondary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Facturas</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list *ngIf="$payments | loading | async as payments">

    <!-- skeleton loading for payments -->
    <ng-template [ngIf]="payments.loading">
      <ion-list>
        <ion-item class="ion-margin-top">
          <ion-grid class="ion-no-padding">
            <ion-row>
              <ion-col size="4">
                <ion-skeleton-text animated class="ion-no-margin" style="width: 100%; height: 16vh; margin-bottom: 10px"></ion-skeleton-text>
              </ion-col>
              <ion-col class="ion-padding-start">
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 50%; height: 15px;"></ion-skeleton-text>                
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 90%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 55%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 75%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
              </ion-col>
              <ion-col size="2">
                <ion-skeleton-text animated class="ion-no-margin" style="width: 100%;"></ion-skeleton-text>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
        <ion-item class="ion-margin-top">
          <ion-grid class="ion-no-padding">
            <ion-row>
              <ion-col size="4">
                <ion-skeleton-text animated class="ion-no-margin" style="width: 100%; height: 16vh; margin-bottom: 10px"></ion-skeleton-text>
              </ion-col>
              <ion-col class="ion-padding-start">
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 50%; height: 15px;"></ion-skeleton-text>                
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 90%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 55%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 75%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
              </ion-col>
              <ion-col size="2">
                <ion-skeleton-text animated class="ion-no-margin" style="width: 100%;"></ion-skeleton-text>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
        <ion-item class="ion-margin-top">
          <ion-grid class="ion-no-padding">
            <ion-row>
              <ion-col size="4">
                <ion-skeleton-text animated class="ion-no-margin" style="width: 100%; height: 16vh; margin-bottom: 10px"></ion-skeleton-text>
              </ion-col>
              <ion-col class="ion-padding-start">
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 50%; height: 15px;"></ion-skeleton-text>                
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 90%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 55%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 75%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
              </ion-col>
              <ion-col size="2">
                <ion-skeleton-text animated class="ion-no-margin" style="width: 100%;"></ion-skeleton-text>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
        <ion-item class="ion-margin-top">
          <ion-grid class="ion-no-padding">
            <ion-row>
              <ion-col size="4">
                <ion-skeleton-text animated class="ion-no-margin" style="width: 100%; height: 16vh; margin-bottom: 10px"></ion-skeleton-text>
              </ion-col>
              <ion-col class="ion-padding-start">
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 50%; height: 15px;"></ion-skeleton-text>                
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 90%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 55%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 75%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
              </ion-col>
              <ion-col size="2">
                <ion-skeleton-text animated class="ion-no-margin" style="width: 100%;"></ion-skeleton-text>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
        <ion-item class="ion-margin-top">
          <ion-grid class="ion-no-padding">
            <ion-row>
              <ion-col size="4">
                <ion-skeleton-text animated class="ion-no-margin" style="width: 100%; height: 16vh; margin-bottom: 10px"></ion-skeleton-text>
              </ion-col>
              <ion-col class="ion-padding-start">
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 50%; height: 15px;"></ion-skeleton-text>                
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 90%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 55%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
                <ion-col size="12">
                  <ion-skeleton-text animated class="ion-no-margin" style="width: 75%; margin-top: 3vh;"></ion-skeleton-text>
                </ion-col>
              </ion-col>
              <ion-col size="2">
                <ion-skeleton-text animated class="ion-no-margin" style="width: 100%;"></ion-skeleton-text>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
      </ion-list>
    </ng-template>

    <!-- list of payments -->
    <ng-template [ngIf]="payments.value">
      <ion-card *ngFor="let payment of payments.value.payments">
        <ion-item class="ion-no-padding">
          <ion-thumbnail class="ion-no-margin" slot="start">
            <img [src]="apiUrl + payment.service.img_url">
          </ion-thumbnail>
          <ion-grid>
            <ion-row>
              <ion-col size="12">
                <ion-title class="ion-no-padding">{{ payment.service.title | titlecase }}</ion-title>
              </ion-col>
              <ion-col size="12">
                <ion-badge *ngIf="payment.state.toLowerCase() === 'pagado'" color="success">{{payment.state | uppercase}}</ion-badge>
                <ion-badge *ngIf="payment.state.toLowerCase() === 'por pagar'" color="secondary">{{payment.state | uppercase}}</ion-badge>
                <ion-badge *ngIf="payment.state.toLowerCase() === 'en proceso'" color="medium">{{payment.state | uppercase}}</ion-badge>
                <ion-badge *ngIf="payment.state.toLowerCase() === 'cancelado'" color="danger">{{payment.state | uppercase}}</ion-badge>
                <ion-badge *ngIf="payment.state.toLowerCase() === 'reembolsado'" color="danger">{{'cancelado' | uppercase}}</ion-badge>
              </ion-col>
              <ion-col size="1">
                <ion-icon name="receipt-outline"></ion-icon>
              </ion-col>
              <ion-col size="11">
                <h6 class="ion-no-margin ion-margin-start">{{ payment.buyOrder }}</h6>
              </ion-col>
              <ion-col size="1">
                <ion-icon name="person-outline"></ion-icon>
              </ion-col>
              <ion-col size="11">
                <h6 class="ion-no-margin ion-margin-start">{{ payment.client.firstname + ' ' + payment.client.lastname | titlecase }}</h6>
              </ion-col>
              <ion-col size="1">
                <ion-icon name="cash-outline"></ion-icon>
              </ion-col>
              <ion-col size="11">
                <h6 class="ion-no-margin ion-margin-start">${{ payment.amount - (payment.amount * payment.service.commission) | number }}</h6>
              </ion-col>
            </ion-row>
          </ion-grid>
          <!-- <ion-icon size=large name="calendar-outline"></ion-icon>
          <ion-note><strong>{{ payment.updated_at | date:'dd/mmyyyy' }}</strong></ion-note> -->
        </ion-item>
      </ion-card>
    </ng-template>
  </ion-list>
</ion-content>

<!-- <ion-footer>
  <ion-toolbar>
    <ion-grid>
      <ion-row>
        <ion-col size="12">
          <ion-label><strong class="ion-float-start">Por pagar:</strong></ion-label>
          <ion-label><strong class="ion-float-end">${{ '235000' | number }}</strong></ion-label>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-footer> -->
